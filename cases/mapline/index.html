<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>地图规划路线</title>
    <script src="https://guanqi.xyz/fe/assets/scripts/matomo.js"></script>
    <!-- End Matomo Code -->
    <link rel="shortcut icon" type="image/x-icon" href="../../assets/images/favicon.ico" />
    <script charset="utf-8" src="https://map.qq.com/api/gljs?v=1.exp&key=3VYBZ-FGLWF-QJKJG-J3WIE-IVYAJ-RYBGN"></script>
    <style>
        html,
        body {
            height: 100%;
            margin: 0px;
            padding: 0px;
        }

        #mapContainer {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body onload="initMap()">
    <div id="mapContainer"></div>
    <script>
        function initMap() {
            //初始化地图
            var map = new TMap.Map('mapContainer', {
                center: new TMap.LatLng(39.90374, 116.397827), //地图显示中心点
                zoom: 5 //缩放级别
            });
    
            //创建 MultiPolyline
            var polylineLayer = new TMap.MultiPolyline({
                id: 'polyline-layer', //图层唯一标识
                map: map, //绘制到目标地图
                //折线样式定义
                styles: {
                    'style_blue': new TMap.PolylineStyle({
                        'color': '#f00', //线填充色
                        'width': 6, //折线宽度
                        'borderWidth': 5, //边线宽度
                        'borderColor': '#FFF', //边线颜色
                        'lineCap': 'butt' //线端头方式
                    })
                },
                //折线数据定义
                geometries: [{ //第1条线
                    'id': 'pl_1', //折线唯一标识，删除时使用
                    'styleId': 'style_blue', //绑定样式名
                    'paths': [
                        new TMap.LatLng(39.90374, 116.397827),
                        new TMap.LatLng(31.23958, 121.499763),
                        new TMap.LatLng(23.10647, 113.32446),
                        new TMap.LatLng(29.563348, 106.466159),
                        new TMap.LatLng(30.764284, 114.213500),
                    ]
                }, ]
            });
    
            //初始化marker
            // var marker = new TMap.MultiMarker({
            //     id: "marker-layer", //图层id
            //     map: map,
            //     styles: { //点标注的相关样式
            //         "marker": new TMap.MarkerStyle({
            //             "width": 25,
            //             "height": 35,
            //             "anchor": { x: 16, y: 32 },
            //             "src": "https://mapapi.qq.com/web/lbs/javascriptGL/demo/img/markerDefault.png"
            //         })
            //     },
            //     geometries: [{ //点标注数据数组
            //         "id": "demo",
            //         "styleId": "marker",
            //         "position": new TMap.LatLng(39.90374,116.397827),
            //         "properties": {
            //             "title": "北京市"
            //         }
            //     }]
            // });
    
            //初始marker
            var marker = new TMap.MultiMarker({
                id: 'marker-layer',
                map: map,
                styles: {
                    "marker": new TMap.MarkerStyle({
                        "width": 24,
                        "height": 35,
                        "anchor": {
                            x: 12,
                            y: 35
                        },
                        "src": 'https://mapapi.qq.com/web/lbs/javascriptGL/demo/img/markerDefault.png'
                    })
                },
                geometries: [{
                    "id": 'demo1',
                    "styleId": 'marker',
                    "position": new TMap.LatLng(39.90374, 116.397827),
                    "properties": {
                        "title": "北京市"
                    }
                },
                {
                    "id": 'demo2',
                    "styleId": 'marker',
                    "position": new TMap.LatLng(31.23958, 121.499763),
                    "properties": {
                        "title": "上海市"
                    }
                },
                {
                    "id": 'demo3',
                    "styleId": 'marker',
                    "position": new TMap.LatLng(23.10647, 113.32446),
                    "properties": {
                        "title": "广州市"
                    }
                },
                {
                    "id": 'demo4',
                    "styleId": 'marker',
                    "position": new TMap.LatLng(29.563348, 106.466159),
                    "properties": {
                        "title": "重庆市"
                    }
                },
                {
                    "id": 'demo5',
                    "styleId": 'marker',
                    "position": new TMap.LatLng(30.764284, 114.213500),
                    "properties": {
                        "title": "武汉市"
                    }
                }]
            });
            //初始化infoWindow
            var infoWindow = new TMap.InfoWindow({
                map: map,
                position: new TMap.LatLng(39.90374, 116.397827),
                offset: {
                    x: 0,
                    y: -32
                } //设置信息窗相对position偏移像素
            });
            infoWindow.close(); //初始关闭信息窗关闭
            //监听标注点击事件
            marker.on("click", function (evt) {
                //设置infoWindow
                infoWindow.open(); //打开信息窗
                infoWindow.setPosition(evt.geometry.position); //设置信息窗位置
                infoWindow.setContent(evt.geometry.properties.title.toString()); //设置信息窗内容
            })
    
        }
    </script>
</body>
</html>